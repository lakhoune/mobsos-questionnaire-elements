<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../polymer-sortablejs/polymer-sortablejs.html">
<link rel="import" href="mobsos-question-editor.html">

<!--
`mobsos-questionnaire-editor`
An editor for creating questionnaires for MobSOS.

@demo demo/questionnaire.html
-->

<dom-module id="mobsos-questionnaire-editor">
  <template>
    <style>

      :host {
        display: block;
      }

      #questionnaire {
        @apply(--layout-vertical);
        @apply(--layout-center);
      }

      mobsos-question-editor {
        border: 1px solid lightgray;
        padding: 25px;
        margin-bottom: 15px;
        width: 100%;
      }

    </style>

    <sortable-js id="questionnaire">

      <mobsos-question-editor></mobsos-question-editor>

      <mobsos-question-editor></mobsos-question-editor>

    </sortable-js>

  </template>

  <script>
    Polymer({

      is: 'mobsos-questionnaire-editor',

      properties: {},

      exportXML: function() {
        var xml = '<?xml version="1.0" encoding="utf-8" ?>' +
                '<qu:Questionnaire xmlns="http://dbis.rwth-aachen.de/mobsos/questionnaire.xsd" xmlns:qu="http://dbis.rwth-aachen.de/mobsos/questionnaire.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n';

        // now add all the question's XML nodes
        var questionNodes = this.$.questionnaire.children;

        for (var i = 0; i < questionNodes.length; i++) {
          var questionNode = questionNodes[i];
          xml += questionNode.exportXML() + '\n\n';
        }

        xml += '</qu:Questionnaire>';

        console.log(xml);
        return xml;
      }

    });
  </script>
</dom-module>